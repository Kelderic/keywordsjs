!function(a){a.Keywords=function(){function b(a,b){for(var c in b)a.style[c]=b[c]}var c=function(c){var d=this;if(!1 in c)return!1;d.colors={},"colors"in c&&(d.colors.default="default"in c.colors?c.colors.default:{},d.colors.highlight="highlight"in c.colors?c.colors.highlight:{},"color"in d.colors.default&&(d.colors.default.fill=d.colors.default.color),"color"in d.colors.highlight&&(d.colors.highlight.fill=d.colors.highlight.color)),d.delimiter="delimiter"in c?c.delimiter:" ",d.el={},d.el.input=document.querySelector(c.selector),d.el.hidden=d.el.input.cloneNode(),d.el.hidden.type="hidden",d.el.input.name="",d.el.input.id="",d.el.input.value="",d.el.outerWrap=document.createElement("div"),d.el.keywordWrap=document.createElement("div"),d.el.template=document.createElement("div"),d.el.highlighted=null;var e=a.getComputedStyle(d.el.input,null);b(d.el.outerWrap,{position:"relative",display:"inline"==e.getPropertyValue("display")?"inline-block":e.getPropertyValue("display")}),b(d.el.keywordWrap,{"pointer-events":"none",position:"absolute",top:e.getPropertyValue("border-top-width"),left:e.getPropertyValue("border-left-width"),padding:"4px 0 4px 4px"}),b(d.el.template,{"padding-left":parseInt(e.getPropertyValue("padding-left"))-2+"px","padding-right":parseInt(e.getPropertyValue("padding-right"))-2+20+"px","font-size":e.getPropertyValue("font-size"),"font-weight":e.getPropertyValue("font-weight"),"font-style":e.getPropertyValue("font-style"),"font-family":e.getPropertyValue("font-family"),display:"inline-block","pointer-events":"auto",position:"relative","border-radius":"2px","box-sizing":"border-box","margin-right":"4px","line-height":parseInt(e.getPropertyValue("height"))-8+"px"}),b(d.el.template,d.colors.default),d.el.input.parentNode.insertBefore(d.el.outerWrap,d.el.input.nextSibling),d.el.outerWrap.appendChild(d.el.hidden),d.el.outerWrap.appendChild(d.el.input),d.el.outerWrap.appendChild(d.el.keywordWrap),d.updateKeywordsFromRealString(d.el.hidden.value),d.el.keywordWrap.addEventListener("click",function(a){"button"==a.target.nodeName.toLowerCase()&&(d.removeKeyword(a.target.parentNode),d.el.input.focus())}),d.el.outerWrap.addEventListener("focusin",function(a){d.el.highlighted&&d.unhighlightKeyword(d.el.highlighted)}),d.el.outerWrap.addEventListener("focusout",function(b){d.el.input.value&&a.setTimeout(function(a){var b=d.el.input.value.replace(d.delimiter,"");d.addKeyword(b)},10)}),d.el.outerWrap.addEventListener("keypress",function(b){console.log(b.which),b.which==d.delimiter.charCodeAt(0)&&d.el.input.value&&a.setTimeout(function(a){var b=d.el.input.value.replace(d.delimiter,"");d.addKeyword(b)},10)}),d.el.outerWrap.addEventListener("keydown",function(b){if(console.log(b.which),13==b.which)d.el.input.value&&(b.preventDefault(),a.setTimeout(function(a){var b=d.el.input.value.replace(d.delimiter,"");d.addKeyword(b)},10));else if(8==b.which){if(!d.el.input.value&&d.el.keywordWrap.children.length>0)if(b.preventDefault(),d.el.highlighted){var c=d.el.highlighted;c.previousElementSibling?d.highlightKeyword(c.previousElementSibling):d.el.input.focus(),d.removeKeyword(c)}else d.highlightKeyword(d.el.keywordWrap.lastChild)}else if(46==b.which){if(!d.el.input.value&&d.el.keywordWrap.children.length>0&&d.el.highlighted){var c=d.el.highlighted;c.nextElementSibling?d.highlightKeyword(c.nextElementSibling):d.el.input.focus(),d.removeKeyword(c)}}else if(37==b.which){if(!d.el.input.value&&d.el.keywordWrap.children.length>0)if(d.el.highlighted){var c=d.el.highlighted;c.previousElementSibling&&(d.unhighlightKeyword(c),d.highlightKeyword(c.previousElementSibling))}else d.highlightKeyword(d.el.keywordWrap.lastChild)}else if(39==b.which&&!d.el.input.value&&d.el.keywordWrap.children.length>0&&d.el.highlighted){var c=d.el.highlighted;d.unhighlightKeyword(c),c.nextElementSibling?d.highlightKeyword(c.nextElementSibling):d.el.input.focus()}})};return c.prototype.addKeyword=function(a){var b=this;if(a){var c=b.el.template.cloneNode();c.innerHTML=a+'<button type="button" style="appearance:none; fill:inherit; color:inherit; font-size:0; background:transparent; border:none; box-shadow:none; cursor:pointer; position:absolute; top:calc(50% - 10px); right:2px; padding:4px; height:auto; width:auto;"><svg style="pointer-events:none;height:14px;width:14px;" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 16 16"><polygon points="15,3 13,1 8,6 3,1 1,3 6,8 1,13 3,15 8,10 13,15 15,13 10,8 "/></svg></button>',b.el.keywordWrap.appendChild(c),b.el.input.value="",b.el.input.style["padding-left"]=b.el.keywordWrap.offsetWidth+6+"px",b.el.hidden.value=b.buildRealStringFromKeywords()}},c.prototype.removeKeyword=function(a){var b=this;b.el.keywordWrap.removeChild(a),b.el.input.style["padding-left"]=b.el.keywordWrap.offsetWidth+6+"px",b.el.hidden.value=b.buildRealStringFromKeywords()},c.prototype.highlightKeyword=function(a){var c=this;b(a,c.colors.highlight),c.el.input.blur(),a.firstElementChild.focus(),c.el.highlighted=a},c.prototype.unhighlightKeyword=function(a){var c=this;b(a,c.colors.default),c.el.highlighted=null},c.prototype.buildRealStringFromKeywords=function(){for(var a=this,b="",c=a.el.keywordWrap.children,d=0,e=c.length;d<e;d++)b+=c[d].textContent+a.delimiter;return b},c.prototype.updateKeywordsFromRealString=function(a){var b=this;if(b.el.keywordWrap.innerHTML="",a.trim())for(var c=a.trim().split(b.delimiter),d=0,e=c.length;d<e;d++)b.addKeyword(c[d])},c}()}(window);